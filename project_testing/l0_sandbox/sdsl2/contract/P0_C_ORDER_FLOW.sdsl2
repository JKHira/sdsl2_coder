@File { profile:"contract", id_prefix:"P0_C_ORDER_FLOW" }
@Interface { id:"ORDER_API", title:"Order API" }
interface OrderApi {}
@Interface { id:"INVENTORY_API", title:"Inventory API" }
interface InventoryApi {}
@Interface { id:"PAYMENT_FULFILLMENT_API", title:"Payment & Fulfillment API" }
interface PaymentFulfillmentApi {}
@Structure { id:"SUBMIT_ORDER", contract:["CONTRACT.SubmitOrder"] }
struct SubmitOrder {}
@Structure { id:"RESERVE_INVENTORY", contract:["CONTRACT.ReserveInventory"] }
struct ReserveInventory {}
@Structure { id:"PAY_AND_CREATE_FULFILLMENT", contract:["CONTRACT.PayAndCreateFulfillment"] }
struct PayAndCreateFulfillment {}
@Function { id:"SUBMIT_ORDER", bind:@Interface.ORDER_API, refs:[@Structure.SUBMIT_ORDER] }
f submit_order(SubmitOrder): SubmitOrder
@Function { id:"RESERVE_INVENTORY", bind:@Interface.INVENTORY_API, refs:[@Structure.RESERVE_INVENTORY] }
f reserve_inventory(ReserveInventory): ReserveInventory
@Function {
  id:"PAY_AND_CREATE_FULFILLMENT",
  bind:@Interface.PAYMENT_FULFILLMENT_API,
  refs:[@Structure.PAY_AND_CREATE_FULFILLMENT],
}
f pay_and_create_fulfillment(PayAndCreateFulfillment): PayAndCreateFulfillment
@Rule {
  id:"ORDER_STATE_CONSISTENCY",
  bind:@Interface.ORDER_API,
  contract:["CONTRACT.OrderStateConsistency"],
}
@Rule {
  id:"INVENTORY_NON_NEGATIVE",
  bind:@Interface.INVENTORY_API,
  contract:["CONTRACT.InventoryNonNegative"],
}
@Rule {
  id:"PAYMENT_ATOMICITY",
  bind:@Interface.PAYMENT_FULFILLMENT_API,
  contract:["CONTRACT.PaymentAtomicity"],
}
@Rule {
  id:"AUTHZ_ORDER_WRITE",
  bind:@Interface.ORDER_API,
  contract:["CONTRACT.AuthzOrderWrite"],
}
