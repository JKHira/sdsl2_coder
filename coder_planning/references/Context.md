# Context Summary (SDSL v1 -> v2 Migration)


## 方針転換
SDSL version1という言語を作りTopology Contract をそれに落とし込んでいたが、ルールを付け加えるたびに記述形式が足されたようなおかしな状態になってきたのでもう一度言語仕様を綺麗に整理をし、SDSLv2 を策定した。
ユーザーは、sdsl v1 でこのプロジェクトのcode plan Contract/Topology を言語のプランから LLM が短時間で作成できた一方で、sdsl v1　→　sdsl v2 の移行がうまくいかない点を問題視していた。すでに行ったことは、LLMによる直接書き換え(文法違反多発)。次に書き換えコード作成による移行2バージョン作ってもきちんとできず10ファイルのために10日が過ぎ、移行そのものが目的化しプロジェクトそのものの停滞を招き、費用対効果が合わないという判断に至っています。

このため方針を変更し、**v1 を忠実に転写することではなく、システムの骨格と理念を正しく理解した上で v2 言語で ツールを使う関節的記述することを最優先**とする方針へ転換しました。v1 側の不完全さは前提として受け入れ、細部や不整合は **CI の自動検知で後から洗い出す**という運用に切り替える意図です。

なので、これからツールとインターフェースを作成し、それを使いLLMが ツール経由で正確なsdsl v2 による記述ができるシステムを作ることにした。sdslv2 coder. こうすればどのプロジェクトでもこのコーダーを使いContractとTopology を正確な文法で記述することができるというものである。

実際の運用においては、Mac上のVS Codeなどで「Open Interpreter」自律型エージェント環境を利用します。このエージェントには、直接SDLS v2を書かせるのではなく、「作成したPython Builderクラスをインポートし、メソッドを呼び出して設計図を組み立てよ」という指示を与えます。LLMはPythonの記述には長けているため、提供されたクラスの仕様を読み取り、適切なメソッドを用いて論理構成を組み立てようとします。

ここで特筆すべきは、このシステムが持つ自己修復能力です。仮にLLMが誤ったパラメータでメソッドを呼び出し、文法違反を犯そうとした場合、即座にPythonの実行環境がエラーを返します。Open Interpreterのようなツールを使用している場合、エージェントはこのエラーメッセージを自ら読み取り、「指定したノード名が間違っていた」「この接続は許可されていない」といった事実を学習し、その場でコードを修正して再実行します。この試行錯誤のプロセスはローカル環境内で完結するため、最終的に出力されるSpec DLSは、プログラムによる検証を通過した完全な構文のみとなります。

結論として、この「文法を遵守するツールベースのアプローチ」は、LLMを不安定な「作家」としてではなく、信頼できる「オペレーター」として再定義する手法です。中間言語としてPythonを採用し、ルールの遵守をコード側で強制することで、未知の言語であっても一文字のミスもない正確な記述を自律的に行わせることが可能となります。
